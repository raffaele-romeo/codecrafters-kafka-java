- Refactor to have an encoder and Decoder, so you can encapsulate the byte buffer